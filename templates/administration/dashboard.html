{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Labang Online</title>
    <link rel="stylesheet" href="{% static 'css/administration/admin_dashboard.css' %}">
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>Admin Panel</h2>
                <p>{{ user.full_name }}</p>
            </div>
            <ul class="sidebar-menu">
                <li><a href="{% url 'administration:admin_dashboard' %}" class="active"><i>ğŸ“Š</i> Dashboard</a></li>
                <li><a href="{% url 'administration:admin_users' %}"><i>ğŸ‘¥</i> Users</a></li>
                <li><a href="{% url 'administration:admin_certificates' %}"><i>ğŸ“„</i> Certificates</a></li>
                <li><a href="{% url 'administration:admin_reports' %}"><i>ğŸ“‹</i> Reports</a></li>
                <li><a href="{% url 'administration:admin_announcements' %}"><i>ğŸ“¢</i> Announcements</a></li>
            </ul>
            <div class="sidebar-footer">
                <a href="{% url 'accounts:personal_info' %}" class="btn btn-primary"> USER VIEW</a>
                <form method="get" action="{% url 'accounts:logout_confirm' %}" class="logout-form">
                    <button type="submit" class="btn-logout">LOGOUT</button>
                </form>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Header -->
            <div class="dashboard-header">
                <h1>Dashboard Overview</h1>
                <p>Welcome back, {{ user.full_name }}. Here's what's happening with your barangay.</p>
            </div>

            <!-- Summary Cards -->
            <div class="summary-grid">
                <!-- User Statistics -->
                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Total Users</span>
                        <div class="summary-card-icon icon-blue">ğŸ‘¥</div>
                    </div>
                    <div class="summary-card-value">{{ total_users }}</div>
                </div>

                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Total Admin</span>
                        <div class="summary-card-icon icon-red">ğŸ‘·ğŸ»â€â™‚ï¸</div>
                    </div>
                    <div class="summary-card-value">{{ total_admin }}</div>
                </div>

                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Verified Users</span>
                        <div class="summary-card-icon icon-green">âœ“</div>
                    </div>
                    <div class="summary-card-value">{{ verified_users }}</div>
                </div>

                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Pending Verification</span>
                        <div class="summary-card-icon icon-orange">â³</div>
                    </div>
                    <div class="summary-card-value">{{ pending_verification }}</div>
                </div>

                <!-- Certificate Statistics -->
                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Total Certificates</span>
                        <div class="summary-card-icon icon-purple">ğŸ“„</div>
                    </div>
                    <div class="summary-card-value">{{ total_certificates }}</div>
                </div>

                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Pending Payments</span>
                        <div class="summary-card-icon icon-orange">ğŸ’³</div>
                    </div>
                    <div class="summary-card-value">{{ pending_payments }}</div>
                </div>

                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Paid Certificates</span>
                        <div class="summary-card-icon icon-green">ğŸ’°</div>
                    </div>
                    <div class="summary-card-value">{{ paid_certificates }}</div>
                </div>

                <!-- Report Statistics -->
                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Total Reports</span>
                        <div class="summary-card-icon icon-blue">ğŸ“‹</div>
                    </div>
                    <div class="summary-card-value">{{ total_reports }}</div>
                </div>

                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Pending Reports</span>
                        <div class="summary-card-icon icon-red">âš ï¸</div>
                    </div>
                    <div class="summary-card-value">{{ pending_reports }}</div>
                </div>

                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Resolved Reports</span>
                        <div class="summary-card-icon icon-green">âœ…</div>
                    </div>
                    <div class="summary-card-value">{{ resolved_reports }}</div>
                </div>
            </div>

            <!-- Recent Certificates -->
            <div class="activity-section">
                <div class="activity-header">
                    <h2>Recent Certificate Requests</h2>
                    <a href="{% url 'administration:admin_certificates' %}" class="view-all-link">View All â†’</a>
                </div>
                {% if recent_certificates %}
                <ul class="activity-list">
                    {% for cert in recent_certificates %}
                    <li class="activity-item">
                        <div class="activity-info">
                            <h4>{{ cert.request_id }} - {{ cert.get_certificate_type_display }}</h4>
                            <p>{{ cert.user.full_name }} â€¢ {{ cert.created_at|date:"M d, Y" }}</p>
                        </div>
                        <span class="status-badge status-{{ cert.payment_status }}">{{ cert.get_payment_status_display }}</span>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <div class="empty-state">
                    <i>ğŸ“„</i>
                    <p>No certificate requests yet</p>
                </div>
                {% endif %}
            </div>

            <!-- Recent Reports -->
            <div class="activity-section">
                <div class="activity-header">
                    <h2>Recent Incident Reports</h2>
                    <a href="{% url 'administration:admin_reports' %}" class="view-all-link">View All â†’</a>
                </div>
                {% if recent_reports %}
                <ul class="activity-list">
                    {% for report in recent_reports %}
                    <li class="activity-item">
                        <div class="activity-info">
                            <h4>{{ report.report_id }} - {{ report.incident_type }}</h4>
                            <p>{{ report.user.full_name }} â€¢ {{ report.place }}</p>
                        </div>
                        <span class="status-badge status-{{ report.status|lower|cut:' ' }}">{{ report.status }}</span>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <div class="empty-state">
                    <i>ğŸ“‹</i>
                    <p>No incident reports yet</p>
                </div>
                {% endif %}
            </div>

            <!-- Recent Users -->
            <div class="activity-section">
                <div class="activity-header">
                    <h2>Recent User Registrations</h2>
                    <a href="{% url 'administration:admin_users' %}" class="view-all-link">View All â†’</a>
                </div>
                {% if recent_users %}
                <ul class="activity-list">
                    {% for usr in recent_users %}
                    <li class="activity-item">
                        <div class="activity-info">
                            <h4>{{ usr.full_name }}</h4>
                            <p>{{ usr.email }} â€¢ Joined {{ usr.date_joined|date:"M d, Y" }}</p>
                        </div>
                        {% if usr.resident_confirmation %}
                        <span class="status-badge status-paid">Verified</span>
                        {% else %}
                        <span class="status-badge status-pending">Pending</span>
                        {% endif %}
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <div class="empty-state">
                    <i>ğŸ‘¥</i>
                    <p>No user registrations yet</p>
                </div>
                {% endif %}
            </div>
        </main>
    </div>
</body>
</html>