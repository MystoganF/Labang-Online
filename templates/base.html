<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}LabangOnline{% endblock %}</title>
  {% load static %}
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/app.css' %}">
  {% block head %}{% endblock %}
</head>
<body>
  <header class="site-header">
    <div class="container flex between center" style="padding-top:10px; padding-bottom:10px;">
      <a class="brand" href="/">
        <img src="{% static 'logo.png' %}" alt="LabangOnline" class="logo">
        <span>LabangOnline</span>
      </a>
      <nav class="nav" style="display:flex;align-items:center;gap:16px">
        <a href="/accounts/register/">Register</a>
        <a href="/accounts/login/">Login</a>
        <button id="mode-toggle" class="btn" style="padding:8px 12px">Toggle</button>
      </nav>
    </div>
  </header>

  <main class="site-main">
    <div class="container">
      {% block content %}{% endblock %}
    </div>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>© {% now 'Y' %} Barangay Labangon • LabangOnline</p>
    </div>
  </footer>

  {% block scripts %}{% endblock %}
  <script>
    // Persistent light/dark mode with clear labelling
    const btn = document.getElementById('mode-toggle');
    const key = 'labang-mode';
    function applyMode(mode){
      const html = document.documentElement;
      if(mode === 'light'){
        html.classList.add('light');
        if(btn){ btn.textContent = 'Dark mode'; btn.setAttribute('aria-pressed','true'); }
      } else {
        html.classList.remove('light');
        if(btn){ btn.textContent = 'Light mode'; btn.setAttribute('aria-pressed','false'); }
      }
    }
    // Determine initial mode: saved -> system preference -> dark
    const saved = localStorage.getItem(key);
    if(saved){
      applyMode(saved);
    } else if(window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches){
      applyMode('light');
    } else {
      applyMode('dark');
    }
    btn?.addEventListener('click', ()=>{
      const next = document.documentElement.classList.contains('light') ? 'dark' : 'light';
      localStorage.setItem(key, next);
      applyMode(next);
    });
  </script>
</body>
</html>


