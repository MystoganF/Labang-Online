{% extends 'base.html' %} {% load static %} {% block title %}Reset Password |
Labang Online{% endblock %} {% block content %}
<main class="site-main">
  <div class="brgy-panel panel">
    <div class="header"><h1>Reset Password</h1></div>
    <div class="body">
      <form method="post" class="grid">
        {% csrf_token %}

        <img
          src="{% static 'images/forgot_password_illustration.png' %}"
          alt="Reset Password Graphic"
          style="
            display: block;
            margin: 28px auto 0 auto;
            width: 220px;
            opacity: 0.9;
          "
        />

        <p class="hint-text">
          Please enter your new password below.<br />
          Make sure it's secure and easy to remember.
        </p>

        {% if messages %}
        <div class="messages">
          {% for message in messages %}
          <div class="msg {% if message.tags %}{{ message.tags }}{% endif %}">
            {{ message }}
          </div>
          {% endfor %}
        </div>
        {% endif %}

        <div>
          <label for="new_password">New Password</label>
          <input
            type="password"
            id="new_password"
            name="new_password"
            required
            minlength="8"
            placeholder="Enter your new password"
            autocomplete="new-password"
          />
          <small class="form-hint">Password must be at least 8 characters long</small>
        </div>

        <div>
          <label for="confirm_password">Confirm New Password</label>
          <input
            type="password"
            id="confirm_password"
            name="confirm_password"
            required
            minlength="8"
            placeholder="Confirm your new password"
            autocomplete="new-password"
          />
        </div>

        <div class="actions center-actions">
          <button type="submit" class="btn btn-primary">
            Update Password
          </button>
          <a href="{% url 'accounts:login' %}" class="btn btn-secondary">
            Back to Login
          </a>
        </div>
      </form>
    </div>
  </div>
</main>

<script>
// Password confirmation validation
document.getElementById('confirm_password').addEventListener('input', function(e) {
    const newPassword = document.getElementById('new_password').value;
    const confirmPassword = e.target.value;
    
    if (confirmPassword && newPassword !== confirmPassword) {
        e.target.setCustomValidity('Passwords do not match');
        e.target.style.borderColor = '#dc3545';
    } else {
        e.target.setCustomValidity('');
        e.target.style.borderColor = '';
    }
});

document.getElementById('new_password').addEventListener('input', function(e) {
    const confirmPassword = document.getElementById('confirm_password');
    if (confirmPassword.value) {
        confirmPassword.dispatchEvent(new Event('input'));
    }
});

// Show password strength
document.getElementById('new_password').addEventListener('input', function(e) {
    const password = e.target.value;
    const strength = getPasswordStrength(password);
    
    // You can add visual feedback here if needed
    console.log('Password strength:', strength);
});

function getPasswordStrength(password) {
    let strength = 0;
    
    if (password.length >= 8) strength++;
    if (/[a-z]/.test(password)) strength++;
    if (/[A-Z]/.test(password)) strength++;
    if (/[0-9]/.test(password)) strength++;
    if (/[^A-Za-z0-9]/.test(password)) strength++;
    
    return strength;
}
</script>
{% endblock %}
