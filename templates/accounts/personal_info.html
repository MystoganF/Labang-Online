{% extends 'dashboard_base.html' %}
{% load static %}

{% block title %}Personal Info - LabangOnline{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/pages/personal_info.css' %}" />
{% endblock %}

{% block content %}
<!-- Left Column: User Information -->
<div class="content-left">
  <div class="user-header">
    {% if user.profile_photo_url %}
    <img src="{{ user.profile_photo_url }}" alt="User Profile" />
    {% else %}
    <img
      src="{% static 'icons/default_user.png' %}"
      alt="User Profile"
    />
    {% endif %}
    <div class="user-name">
      <h2>{{ user.full_name }}</h2>
      {% if user.is_superuser %}
      <span class="role admin">Admin</span>
      {% elif user.resident_confirmation %}
      <span class="role">Resident</span>
      {% else %}
      <span class="role pending">Pending Verification</span>
      {% endif %}
    </div>
  </div>

  <div class="info-section">
    <h3>USER INFORMATION</h3>
    <table class="user-info-table">
      <tr>
        <td>Full Name:</td>
        <td>{{ user.full_name }}</td>
      </tr>
      <tr>
        <td>Username:</td>
        <td>{{ user.username }}</td>
      </tr>
      <tr>
        <td>Email:</td>
        <td>{{ user.email }}</td>
      </tr>
      <tr>
        <td>Date of Birth:</td>
        <td>{{ user.date_of_birth }}</td>
      </tr>
      <tr>
        <td>Civil Status:</td>
        <td>{{ user.civil_status|default:"Not specified" }}</td>
      </tr>
      <tr>
        <td>Address:</td>
        <td>
          {{ user.address_line }}, {{ user.barangay }}, {{ user.province }}, {{ user.postal_code }}
        </td>
      </tr>
      <tr>
        <td>Resident Confirmed:</td>
        <td>
          {% if user.resident_confirmation %}
          <span style="color: #10b981; font-weight: 600">✓ Yes</span>
          {% else %}
          <span style="color: var(--text-secondary); font-weight: 600">⏳ No</span>
          {% endif %}
        </td>
      </tr>
    </table>
  </div>

  <div class="info-section">
    <h3>CONTACT INFORMATION</h3>
    <table class="user-info-table">
      <tr>
        <td>Mobile:</td>
        <td>{{ user.contact_number }}</td>
      </tr>
      <tr>
        <td>Email:</td>
        <td>{{ user.email }}</td>
      </tr>
    </table>
  </div>

  <div class="info-section">
    <h3>RESIDENT ID</h3>
    <div class="resident-id-container">
      {% if user.resident_id_photo_url %}
      <img src="{{ user.resident_id_photo_url }}" alt="Resident ID" class="real-id" />
      {% else %}
      <div class="id-placeholder">
        <img src="{% static 'icons/file-report.png' %}" alt="No ID" />
        <p>No Resident ID uploaded yet</p>
      </div>
      {% endif %}
    </div>
  </div>
</div>

<!-- Right Column: Action Buttons -->
<div class="content-right">
  <a href="{% url 'accounts:edit_profile' %}" class="action-btn">
    EDIT INFORMATION
  </a>
  {% if user.is_superuser %}
  <a href="{% url 'administration:admin_dashboard' %}" class="action-btn admin-btn">
    ADMIN DASHBOARD
  </a>
  {% endif %}
</div>
{% endblock %}